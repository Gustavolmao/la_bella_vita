<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fazer Pedido - La Bella Vitta</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    .pedido-container {
      max-width: 900px;
      margin: 100px auto 60px auto;
      background-color: #fffaf0;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .pedido-container h2 {
      color: #701010;
      text-align: center;
      margin-bottom: 10px;
    }

    select, input[type=number] {
      font-size: 16px;
      padding: 10px;
      border: 2px solid #701010;
      border-radius: 8px;
      background-color: #fff;
      outline: none;
      transition: 0.2s;
      color: #701010;
    }

    select:focus, input[type=number]:focus {
      border-color: #a52828;
      box-shadow: 0 0 5px rgba(165,40,40,0.3);
    }

    .mesa-select {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 30px;
      gap: 10px;
    }

    .mesa-select label {
      font-weight: bold;
      color: #701010;
      font-size: 18px;
    }

    .produto {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 8px 0;
      padding: 8px;
      border-bottom: 1px solid #c93030;
    }

    .produto input[type=number] {
      width: 70px;
      text-align: center;
    }

    .total {
      text-align: center;
      margin-top: 30px;
    }

    .total button {
      background-color: #701010;
      color: white;
      padding: 12px 28px;
      border: none;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
      transition: 0.2s;
    }

    .total button:hover {
      background-color: #a52828;
    }
  </style>

  <script>
    function calcularTotal() {
      let total = 0;
      document.querySelectorAll(".produto").forEach(produto => {
        const preco = parseFloat(produto.dataset.preco);
        const qtd = parseInt(produto.querySelector("input").value) || 0;
        total += preco * qtd;
      });
      document.getElementById("total").textContent = total
        .toFixed(2)
        .replace('.', ',');
    }
  </script>
</head>

<body>
<header>
  <div class="logo-topo">La Bella Vitta</div>
  <nav class="menu-topo">
    <a href="index.html">Início</a>
    <a href="cardapio.html">Cardápio</a>
    <a href="pedido.html" class="ativo">Fazer Pedido</a>
  </nav>
</header>


  <main class="pedido-container">
    <h2>Monte seu Pedido</h2>

    <!-- Mesa -->
    <div class="mesa-select">
      <label for="mesa">Mesa:</label>
      <select id="mesa">
        <option value="">Selecione...</option>
        <option value="1">Mesa 1</option>
        <option value="2">Mesa 2</option>
        <option value="3">Mesa 3</option>
        <option value="4">Mesa 4</option>
        <option value="5">Mesa 5</option>
        <option value="6">Mesa 6</option>
        <option value="7">Mesa 7</option>
        <option value="8">Mesa 8</option>
      </select>
    </div>

    <!-- ===================== PIZZAS ===================== -->
    <section>
      <h3>Pizzas</h3>
      <div class="categoria">
        <div class="produto" data-preco="42.00"><span>Margherita – R$ 42,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="45.00"><span>Calabresa – R$ 45,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="52.00"><span>Quattro Formaggi – R$ 52,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="48.00"><span>Portuguesa – R$ 48,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="55.00"><span>Pizza Dolce – R$ 55,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
      </div>
    </section>

    <!-- ===================== MASSAS ===================== -->
    <section>
      <h3>Massas (350g)</h3>
      <div class="categoria">
        <div class="produto" data-preco="39.00"><span>Espaguete à Bolonhesa – R$ 39,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="46.00"><span>Lasanha de Carne – R$ 46,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="36.00"><span>Nhoque ao Sugo – R$ 36,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="42.00"><span>Fettuccine Alfredo – R$ 42,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
      </div>
    </section>

    <!-- ===================== RISOTOS ===================== -->
    <section>
      <h3>Risotos (300g)</h3>
      <div class="categoria">
        <div class="produto" data-preco="54.00"><span>Risoto de Funghi – R$ 54,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="62.00"><span>Risoto de Camarão – R$ 62,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="50.00"><span>Risoto de Parmesão – R$ 50,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
      </div>
    </section>

    <!-- ===================== ENTRADAS ===================== -->
    <section>
      <h3>Entradas</h3>
      <div class="categoria">
        <div class="produto" data-preco="22.00"><span>Bruschetta Clássica – R$ 22,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="20.00"><span>Focaccia – R$ 20,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="28.00"><span>Salada Caprese – R$ 28,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
      </div>
    </section>

    <!-- ===================== SOBREMESAS ===================== -->
    <section>
      <h3>Sobremesas</h3>
      <div class="categoria">
        <div class="produto" data-preco="26.00"><span>Tiramisù – R$ 26,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="24.00"><span>Panna Cotta – R$ 24,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="22.00"><span>Cannoli Siciliani – R$ 22,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
      </div>
    </section>

    <!-- ===================== BEBIDAS ===================== -->
    <section>
      <h3>Bebidas</h3>
      <div class="categoria">
        <div class="produto" data-preco="29.00"><span>Vinho Italiano (taça) – R$ 29,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="95.00"><span>Vinho Italiano (garrafa) – R$ 95,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="12.00"><span>Suco Natural (300ml) – R$ 12,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="8.00"><span>Refrigerante (lata) – R$ 8,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="6.00"><span>Água – R$ 6,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
        <div class="produto" data-preco="9.00"><span>Café Espresso Italiano – R$ 9,00</span><input type="number" min="0" value="0" onchange="calcularTotal()"></div>
      </div>
    </section>

    <!-- ===================== TOTAL E ENVIO ===================== -->

    <div class="total">
      <h2>Total: R$ <span id="total">0,00</span></h2>

      <form id="formPedido" action="salvar_pedido.php" method="POST">
        <input type="hidden" name="mesa" id="mesaHidden">
        <input type="hidden" name="itens" id="itensHidden">
        <input type="hidden" name="total" id="totalHidden">

        <button type="button" onclick="enviarPedido()">
          Finalizar Pedido
        </button>
      </form>
    </div>

  </main> 

  <footer>
    <p>© 2025 La Bella Vitta - Todos os direitos reservados.</p>
  </footer>

<script>
function enviarPedido() {
  const mesa = document.getElementById("mesa").value;
  if (!mesa) {
    alert("⚠ Por favor, selecione a mesa antes de finalizar o pedido.");
    return;
  }

  let itensTexto = "";
  let total = 0;

  document.querySelectorAll(".produto").forEach(produto => {
    const nome = produto.querySelector("span").innerText;
    const preco = parseFloat(produto.dataset.preco);
    const qtd = parseInt(produto.querySelector("input").value) || 0;

    if (qtd > 0) {
      itensTexto += `${nome} — Quantidade: ${qtd}\n`;
      total += preco * qtd;
    }
  });

  if (itensTexto === "") {
    alert("⚠ Selecione ao menos 1 item para fazer o pedido.");
    return;
  }

  document.getElementById("mesaHidden").value = mesa;
  document.getElementById("itensHidden").value = itensTexto.trim();
  document.getElementById("totalHidden").value = total.toFixed(2);

  document.getElementById("formPedido").submit();
}
</script>

</body>
</html>
